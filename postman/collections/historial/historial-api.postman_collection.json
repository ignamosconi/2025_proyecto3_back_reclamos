{
     "info": {
          "_postman_id": "historial-api-collection",
          "name": "Historial API",
          "description": "Colección para probar los endpoints del módulo de Historial.",
          "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
     },
     "variable": [
          {
               "key": "baseUrl",
               "value": "http://localhost:3000",
               "type": "string"
          },
          {
               "key": "accessToken",
               "value": "",
               "type": "string"
          }
     ],
     "item": [
          {
               "name": "Auth",
               "item": [
                    {
                         "name": "Login Cliente",
                         "event": [
                              {
                                   "listen": "test",
                                   "script": {
                                        "exec": [
                                             "var jsonData = pm.response.json();",
                                             "pm.collectionVariables.set(\"accessToken\", jsonData.accessToken);",
                                             "console.log(\"Access Token set:\", jsonData.accessToken);"
                                        ],
                                        "type": "text/javascript"
                                   }
                              }
                         ],
                         "request": {
                              "method": "POST",
                              "header": [],
                              "body": {
                                   "mode": "raw",
                                   "raw": "{\n    \"email\": \"cliente1@test.com\",\n    \"password\": \"Utnfrvm123!\"\n}",
                                   "options": {
                                        "raw": {
                                             "language": "json"
                                        }
                                   }
                              },
                              "url": {
                                   "raw": "{{baseUrl}}/auth/login",
                                   "host": [
                                        "{{baseUrl}}"
                                   ],
                                   "path": [
                                        "auth",
                                        "login"
                                   ]
                              }
                         },
                         "response": []
                    },
                    {
                         "name": "Login Encargado",
                         "event": [
                              {
                                   "listen": "test",
                                   "script": {
                                        "exec": [
                                             "var jsonData = pm.response.json();",
                                             "pm.collectionVariables.set(\"accessToken\", jsonData.accessToken);",
                                             "console.log(\"Access Token set:\", jsonData.accessToken);"
                                        ],
                                        "type": "text/javascript"
                                   }
                              }
                         ],
                         "request": {
                              "method": "POST",
                              "header": [],
                              "body": {
                                   "mode": "raw",
                                   "raw": "{\n    \"email\": \"encargado1@test.com\",\n    \"password\": \"Utnfrvm123!\"\n}",
                                   "options": {
                                        "raw": {
                                             "language": "json"
                                        }
                                   }
                              },
                              "url": {
                                   "raw": "{{baseUrl}}/auth/login",
                                   "host": [
                                        "{{baseUrl}}"
                                   ],
                                   "path": [
                                        "auth",
                                        "login"
                                   ]
                              }
                         },
                         "response": []
                    },
                    {
                         "name": "Login Gerente",
                         "event": [
                              {
                                   "listen": "test",
                                   "script": {
                                        "exec": [
                                             "var jsonData = pm.response.json();",
                                             "pm.collectionVariables.set(\"accessToken\", jsonData.accessToken);"
                                        ],
                                        "type": "text/javascript"
                                   }
                              }
                         ],
                         "request": {
                              "method": "POST",
                              "header": [],
                              "body": {
                                   "mode": "raw",
                                   "raw": "{\n    \"email\": \"gerente1@test.com\",\n    \"password\": \"Utnfrvm123!\"\n}",
                                   "options": {
                                        "raw": {
                                             "language": "json"
                                        }
                                   }
                              },
                              "url": {
                                   "raw": "{{baseUrl}}/auth/login",
                                   "host": [
                                        "{{baseUrl}}"
                                   ],
                                   "path": [
                                        "auth",
                                        "login"
                                   ]
                              }
                         },
                         "response": []
                    }
               ]
          },
          {
               "name": "Historial",
               "item": [
                    {
                         "name": "Obtener Historial",
                         "request": {
                              "auth": {
                                   "type": "bearer",
                                   "bearer": [
                                        {
                                             "key": "token",
                                             "value": "{{accessToken}}",
                                             "type": "string"
                                        }
                                   ]
                              },
                              "method": "GET",
                              "header": [],
                              "url": {
                                   "raw": "{{baseUrl}}/historial/:reclamoId",
                                   "host": [
                                        "{{baseUrl}}"
                                   ],
                                   "path": [
                                        "historial",
                                        ":reclamoId"
                                   ],
                                   "variable": [
                                        {
                                             "key": "reclamoId",
                                             "value": "REPLACE_WITH_ID"
                                        }
                                   ]
                              }
                         },
                         "response": []
                    },
                    {
                         "name": "Agregar Comentario",
                         "request": {
                              "auth": {
                                   "type": "bearer",
                                   "bearer": [
                                        {
                                             "key": "token",
                                             "value": "{{accessToken}}",
                                             "type": "string"
                                        }
                                   ]
                              },
                              "method": "POST",
                              "header": [],
                              "body": {
                                   "mode": "raw",
                                   "raw": "{\n    \"comentario\": \"Este es un comentario de prueba\"\n}",
                                   "options": {
                                        "raw": {
                                             "language": "json"
                                        }
                                   }
                              },
                              "url": {
                                   "raw": "{{baseUrl}}/historial/:reclamoId/comentario",
                                   "host": [
                                        "{{baseUrl}}"
                                   ],
                                   "path": [
                                        "historial",
                                        ":reclamoId",
                                        "comentario"
                                   ],
                                   "variable": [
                                        {
                                             "key": "reclamoId",
                                             "value": "REPLACE_WITH_ID"
                                        }
                                   ]
                              }
                         },
                         "response": []
                    }
               ]
          }
     ]
}